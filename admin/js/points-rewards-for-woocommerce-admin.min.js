!function(e){"use strict";e(document).ready(function(){window.wps_has_date_validation=!1,!0==jQuery(document).find("#wps_wpr_membership_setting_enable").prop("checked")?jQuery(document).find(".parent_of_div").closest("tr").show():(jQuery(document).find(".parent_of_div").closest("tr").hide(),s()),jQuery(document).find(".wps_wpr_membership_select_all_category_common").click(function(s){s.preventDefault();var t=e(this).data("id");jQuery(document).find("#wps_wpr_membership_category_list_"+t+" option").prop("selected","selected"),jQuery(document).find("#wps_wpr_membership_category_list_"+t).trigger("change")}),jQuery(document).find(".wps_wpr_membership_select_none_category_common").click(function(s){s.preventDefault();var t=e(this).data("id");jQuery(document).find("#wps_wpr_membership_category_list_"+t+" option").removeAttr("selected"),jQuery(document).find("#wps_wpr_membership_category_list_"+t).trigger("change")}),e(document).find(".notice-image img").css("max-width","50px"),e(document).find(".notice-content").css("margin-left","15px"),e(document).find(".notice-container").css({"padding-top":"5px","padding-bottom":"5px",display:"flex","justify-content":"left","align-items":"center"}),e(document).on("click",".wps_wpr_common_slider",function(){e(this).next(".wps_wpr_points_view").slideToggle("fast"),e(this).toggleClass("active")}),e(document).find("#wps_wpr_restrictions_for_purchasing_cat").select2(),e(document).find("#wps_wpr_restrict_redeem_points_category_wise").select2(),e(document).find("#wps_wpr_restrict_redeem_points_membership_wise").select2(),e(document).find("#wps_wpr_restrict_per_currency_dummy_points_category_wise").select2(),e(document).find("#wps_wpr_referral_purchase_dummy_points_category_wise").select2(),e(".wps_points_update").click(function(){var s=e(this).data("id"),t=e(document).find("#add_sub_points"+s).val(),p=e(document).find("#wps_sign"+s).val(),r=e(document).find("#wps_remark"+s).val();if((t=Number(t))>0&&t===parseInt(t,10)){if(""!=r){jQuery("#wps_wpr_loader").show();var i={action:"wps_wpr_points_update",points:t,user_id:s,sign:p,reason:r,wps_nonce:wps_wpr_object.wps_wpr_nonce};e.ajax({url:wps_wpr_object.ajaxurl,type:"POST",data:i,success:function(s){jQuery("#wps_wpr_loader").hide(),e("html, body").animate({scrollTop:e(".wps_rwpr_header").offset().top},800),e('<div class="notice notice-success is-dismissible"><p><strong>'+wps_wpr_object.success_update+"</strong></p></div>").insertAfter(e(".wps_rwpr_header")),setTimeout(function(){location.reload()},1e3)}})}else alert(wps_wpr_object.reason)}else alert(wps_wpr_object.validpoint)}),e(document).on("click",".wps_wpr_email_wrapper_text",function(){e(this).siblings(".wps_wpr_email_wrapper_content").slideToggle()}),e(document).on("change","#wps_wpr_membership_setting_enable",function(){!0==e(this).prop("checked")?(jQuery(document).find(".parent_of_div").closest("tr").show(),t()):(jQuery(document).find(".parent_of_div").closest("tr").hide(),s())}),e(document).on("change",".wps_wpr_common_class_categ",function(){var s=e(this).data("id"),t=e("#wps_wpr_membership_category_list_"+s).val();jQuery("#wps_wpr_loader").show();var p={action:"wps_wpr_select_category",wps_wpr_categ_list:t,wps_nonce:wps_wpr_object.wps_wpr_nonce};e.ajax({url:wps_wpr_object.ajaxurl,type:"POST",data:p,dataType:"json",success:function(e){if("success"==e.result){var t=e.data,p="",r=new Set,i=jQuery("#wps_wpr_membership_product_list_"+s).val();for(var n in t)r.has(n)||(r.add(n),p+='<option value="'+n+'">'+t[n]+"</option>");p=jQuery("#wps_wpr_membership_product_list_"+s).html()+p,jQuery("#wps_wpr_membership_product_list_"+s).html(p),jQuery("#wps_wpr_membership_product_list_"+s+" option").each(function(){r.has(this.value)?r.delete(this.value):jQuery(this).remove()}),jQuery("#wps_wpr_membership_product_list_"+s).val(i),jQuery("#wps_wpr_membership_product_list_"+s).select2(),jQuery("#wps_wpr_loader").hide()}}})});for(var p=e(".wps_wpr_repeat:last").data("id"),r=0;r<=p;r++)e(document).find("#wps_wpr_membership_category_list_"+r).select2(),e(document).find("#wps_wpr_membership_product_list_"+r).select2();wps_wpr_object.check_pro_activate&&wps_wpr_object.check_pro_activate&&e(document).on("click","#wps_wpr_add_more",function(){var s="";e(document).find(".wps_wpr_object_purchase").remove(),e(s='<div class="wps_wpr_object_purchase"><p>'+wps_wpr_object.pro_text+' <a target="_blanck" href="'+wps_wpr_object.pro_link+'">'+wps_wpr_object.pro_link_text+"</a></p></div>").insertAfter(".wp-list-table")}),jQuery(document).on("click",".wps_wpr_remove_button",function(){var s=e(this).attr("id");0==s&&(e(document).find(".wps_wpr_repeat_button").hide(),e("#wps_wpr_membership_setting_enable").attr("checked",!1)),e("#wps_wpr_parent_repeatable_"+s).remove()}),e(document).on("click","#dismiss_notice",function(s){s.preventDefault();var t={action:"wps_wpr_dismiss_notice",wps_nonce:wps_wpr_object.wps_wpr_nonce};e.ajax({url:wps_wpr_object.ajaxurl,type:"POST",data:t,success:function(e){window.location.reload()}})}),jQuery(document).on("click","#wps_wpr_points_on_previous_order",function(e){let s=jQuery(this);try{if("function"==typeof validateDateBeforeSubmit){let t=validateDateBeforeSubmit(s);if(!t)return!1}}catch(p){}s.trigger("submit_points_assignment")}),jQuery(document).on("submit_points_assignment","#wps_wpr_points_on_previous_order",function(){let e=jQuery(this),s=jQuery("#wps_wpr_previous_order_point_value").val().trim(),t=jQuery(".wps_wpr_previous_order_notice"),p=jQuery(".wps_wpr_previous_order_loader"),r=jQuery("#wps_wpr_previous_order_start_date").val(),i=jQuery("#wps_wpr_previous_order_end_date").val();if(e.prop("disabled",!0),t.hide().html(""),parseInt(s)>0){let n={action:"assign_points_on_previous_order",nonce:wps_wpr_object.wps_wpr_nonce,rewards_points:s,start_date:r,end_date:i};p.show(),jQuery.ajax({method:"POST",url:wps_wpr_object.ajaxurl,data:n,success:function(s){p.hide(),e.prop("disabled",!1);let r=s.result?"green":"red";t.css("color",r).html(s.msg).show()},error:function(){p.hide(),e.prop("disabled",!1),t.css("color","red").html(wps_wpr_object.wps_ajax_error).show()}})}else e.prop("disabled",!1),t.css("color","red").html(wps_wpr_object.validpoint).show()})});var s=function(){jQuery(document).find(".wps_wpr_repeat").each(function(e,s){jQuery(document).find("#wps_wpr_membership_level_name_"+e).attr("required",!1),jQuery(document).find("#wps_wpr_membership_level_value_"+e).attr("required",!1),jQuery(document).find("#wps_wpr_membership_expiration_days_"+e).attr("required",!1),jQuery(document).find("#wps_wpr_membership_expiration_"+e).attr("required",!1)})},t=function(){jQuery(document).find(".wps_wpr_repeat").each(function(e,s){jQuery(document).find("#wps_wpr_membership_level_name_"+e).attr("required",!0),jQuery(document).find("#wps_wpr_membership_level_value_"+e).attr("required",!0),jQuery(document).find("#wps_wpr_membership_expiration_days_"+e).attr("required",!0),jQuery(document).find("#wps_wpr_membership_expiration_"+e).attr("required",!0)})}}(jQuery),setTimeout(function(){jQuery(window).width()>=900&&jQuery(".wps_rwpr_navigator_template").stickySidebar({topSpacing:60,bottomSpacing:60})},500),jQuery(document).ready(function(){jQuery(".dashicons.dashicons-menu").click(function(){jQuery(".wps_rwpr_navigator_template").toggleClass("open-btn")})}),jQuery(document).on("change","input","#wps_wpr_coupon_conversion_price",function(){var e=jQuery(this).attr("id");0>jQuery(this).val()&&"wps_wpr_coupon_conversion_price"==e&&(alert(wps_wpr_object.negative),jQuery(this).val("1"))}),jQuery(document).ready(function(){function e(e,s){var t={action:"restrict_user_from_points_table",wps_nonce:wps_wpr_object.wps_wpr_nonce,user_id:e,checked:s};jQuery.ajax({url:wps_wpr_object.ajaxurl,method:"POST",data:t,success:function(e){console.log(e)}})}jQuery(".notice-dismiss").click(function(){jQuery(".notice-success").remove()}),jQuery(document).find("#wps_wpr_select_page_for_campaign").select2(),jQuery(document).find("#wps_wpr_select_win_wheel_page").select2(),jQuery(document).find("#wps_wpr_select_spin_stop").select2(),jQuery(document).on("click","#wps_wpr_gamification_fields_add",function(){if(jQuery(".wps_wpr_add_game_segment_dynamically").length<12){if(!0==jQuery(".wps_wpr_enable_gamification_settings").prop("checked")){var e,s,t,p,r,i,n,a,o;if(e=!0,s=[],t=0,jQuery(document).find(".wps_wpr_enter_segment_name").each(function(){s.push(jQuery(this).val()),!jQuery(this).val()&&++t}),p=[],r=0,jQuery(document).find(".wps_wpr_enter_segment_points").each(function(){p.push(jQuery(this).val()),!jQuery(this).val()&&++r}),i=[],n=0,jQuery(document).find(".wps_wpr_enter_sgemnet_font_size").each(function(){i.push(jQuery(this).val()),!jQuery(this).val()&&++n}),a=[],o=0,jQuery(document).find(".wps_wpr_enter_segment_color").each(function(){a.push(jQuery(this).val()),!jQuery(this).val()&&++o}),(t>0||r>0||n>0||o>0)&&(e=!1),e)jQuery(".wps_wpr_segment_gamification_settings_wrappers").append('<tr class="wps_wpr_add_game_segment_dynamically"><td><input type="text" name="wps_wpr_enter_segment_name[]" id="wps_wpr_enter_segment_name" value="" required></td><td><select name="wps_wpr_game_rewards_type[]" class="wps_wpr_game_rewards_type"><option value="points">Points</option><option value="wallet">Wallet</option></select></td><td><input type="number" min="1" name="wps_wpr_enter_segment_points[]" id="wps_wpr_enter_segment_points" value="" required></td><td><input type="number" max="20" min="1" name="wps_wpr_enter_sgemnet_font_size[]" id="wps_wpr_enter_sgemnet_font_size" value="" required></td><td><input type="color" name="wps_wpr_enter_segment_color[]" id="wps_wpr_enter_segment_color[]" class="wps_wpr_enter_segment_color" value=""></td><td><input type="button" name="wps_wpr_remove_game_segment" id="wps_wpr_remove_game_segment" value="+"></td></tr>');else jQuery(".notice.notice-error.is-dismissible").each(function(){jQuery(this).remove()}),jQuery(".notice.notice-success.is-dismissible").each(function(){jQuery(this).remove()}),jQuery("html, body").animate({scrollTop:jQuery(".wps_rwpr_header").offset().top},800),jQuery('<div class="notice notice-error is-dismissible"><p><strong>Some Fields are empty!</strong></p></div>').insertBefore(jQuery(".wps_wpr_user_gamifications_main_wrappers"))}}else alert(wps_wpr_object.segment_reached_msg)}),jQuery(document).on("click","#wps_wpr_remove_game_segment",function(){!0==jQuery(".wps_wpr_enable_gamification_settings").prop("checked")&&(jQuery(".wps_wpr_add_game_segment_dynamically").length>6?jQuery(this).parents(".wps_wpr_add_game_segment_dynamically").remove():alert(wps_wpr_object.segment_limit_msg))}),wps_wpr_object.is_wallet_active||jQuery(document).on("change",".wps_wpr_game_rewards_type",function(){var e=jQuery(this);"wallet"===e.val()&&(confirm(wps_wpr_object.wallet_alert_message)&&window.open("https://wordpress.org/plugins/wallet-system-for-woocommerce/","_blank"),e.find('option[value="wallet"]').remove(),e.val("points").trigger("change"))}),jQuery(document).on("click",".wps_wpr_add_user_badges_img",function e(){if(void 0===this.window){this.window=wp.media({title:"Insert Image",library:{type:"image"},multiple:!1,button:{text:"Insert Image"}});var s=this;this.window.on("select",function(){var e=s.window.state().get("selection").first().toJSON();jQuery(s).nextAll(".wps_wpr_image_attachment_id").val(e.sizes.thumbnail.url),jQuery(s).prevAll(".wps_wpr_icon_user_badges").attr("src",e.sizes.thumbnail.url),jQuery(s).prevAll(".wps_wpr_icon_user_badges").show()})}return this.window.open(),!1}),jQuery(".wps_wpr_pro_plugin_notices").hide(),wps_wpr_object.check_pro_activate&&jQuery(document).on("click","#wps_wpr_user_badges_fields_add",function(){jQuery(document).find(".wps_wpr_object_purchase").remove();var e='<div class="wps_wpr_object_purchase"><p>'+wps_wpr_object.badge_pro__text+' <a target="_blanck" href="'+wps_wpr_object.pro_link+'">'+wps_wpr_object.pro_link_text+"</a></p></div>";jQuery(".wps_wpr_pro_plugin_notices").show(),jQuery(".wps_wpr_pro_plugin_notices").append(e)}),jQuery(document).on("keyup",".wps_wpr_badges_threshold_points",function(){var e=parseInt(jQuery(this).val()),s=parseInt(jQuery(this).closest(".wps_wpr_add_user_badges_dynamic").prev("tr").find(".wps_wpr_badges_threshold_points").val());e<s?(jQuery(this).focus(),jQuery(this).css("border","2px solid red"),jQuery(".wps_wpr_show_incremented_warning_msg").show(),jQuery(".wps_wpr_show_incremented_warning_msg").html(wps_wpr_object.threshold_warning_msg),jQuery(".wps_wpr_add_more_btn_badge").prop("disabled",!0),jQuery("#wps_wpr_save_user_badges_settings").prop("disabled",!0)):(jQuery(this).blur(),jQuery(this).removeAttr("style"),jQuery(".wps_wpr_show_incremented_warning_msg").hide(),jQuery(".wps_wpr_show_incremented_warning_msg").html(""),jQuery(".wps_wpr_add_more_btn_badge").prop("disabled",!1),jQuery("#wps_wpr_save_user_badges_settings").prop("disabled",!1))}),jQuery(document).on("click","#dismiss-banner",function(){var e={action:"wps_wpr_ajax_banner_action",wps_nonce:wps_wpr_object.wps_wpr_nonce};jQuery.ajax({url:wps_wpr_object.ajaxurl,type:"POST",data:e,success:function(e){window.location.reload()}})}),jQuery(document).on("change",".wps_wpr_assign_mem_rewards_points",function(){var e=jQuery(this).prop("id");"percent"===jQuery("#wps_wpr_choose_mem_points_type_"+(e=e.replace("wps_wpr_choose_mem_points_type_",""))).val()?jQuery("#wps_wpr_assign_mem_points_val_"+e).attr("max",100):jQuery("#wps_wpr_assign_mem_points_val_"+e).removeAttr("max")}),jQuery(document).on("mouseleave","#wps_wpr_coupon_conversion_points",function(){this.value=this.value.replace(/[^0-9]/g,"")}),jQuery(document).on("mouseleave","#wps_wpr_cart_price_rate",function(){this.value=this.value.replace(/[^0-9]/g,"")}),jQuery(document).on("mouseleave","#wps_wpr_coupon_redeem_price",function(){this.value=this.value.replace(/[^0-9]/g,"")}),jQuery(document).on("mouseleave","#wps_wpr_product_purchase_price",function(){this.value=this.value.replace(/[^0-9]/g,"")}),jQuery(document).on("change",".wps_wpr_restrict_user",function(){var s=jQuery(this).attr("data-id");if(jQuery(this).is(":checked")){var t=jQuery(this).val();e(s,t)}else e(s,"no")}),jQuery(document).on("click",".wps_import",function(e){if(e.preventDefault(),""===jQuery("#userpoints_csv_import").val())return alert(wps_wpr_object.invalid_files),!1;jQuery(".wps_wpr_export_points_table_main_wrap").show()}),jQuery(document).on("click","#wps_wpr_confirm_import_option",function(){var e=jQuery(".wps_wpr_export_table_option:checked").val();if(""==e||void 0==e)jQuery(".wps_wpr_export_table_option").focus(),jQuery(".wps_wpr_radion_button_notice").show(),jQuery(".wps_wpr_radion_button_notice").html(wps_wpr_object.radio_validate_msg);else{jQuery(".wps_wpr_radion_button_notice").hide(),jQuery(".wps_wpr_radion_button_notice").html(""),jQuery(".wps_wpr_export_points_table_main_wrap").hide(),jQuery("#wps_wpr_loader").show();var s=new FormData(jQuery("form#mainform")[0]);s.append("action","wps_large_scv_import"),s.append("wps_wpr_export_table_option",e),s.append("wps_nonce",wps_wpr_object.wps_wpr_nonce),s.append("start",0),function e(s){jQuery.ajax({type:"POST",dataType:"json",url:wps_wpr_object.ajaxurl,data:s,processData:!1,contentType:!1,success:function(t){if(console.log("Progress: "+t.progress+"%"),!1==t.result)return alert(t.msg),jQuery("#wps_wpr_loader").hide(),!1;t.finished?(jQuery("#wps_wpr_loader").hide(),alert(wps_wpr_object.csv_import_success_msg),location.reload()):(s.set("start",t.start),e(s))},error:function(e,s,t){jQuery("#wps_wpr_loader").hide(),alert("Error: "+e.responseText)}})}(s)}}),jQuery(document).on("click",".wps_wpr_export_shadow, .wps_wpr_export_close",function(){jQuery(".wps_wpr_export_points_table_main_wrap").hide()})}),jQuery(document).ready(function(e){wps_wpr_object.check_pro_activate&&jQuery(document).on("click",".wps_wpr_repeat_button",function(){var s=!1,t="",p=e(".wps_wpr_repeat:last").data("id");if(p<1){var r=e("#wps_wpr_membership_level_name_"+p).val(),i=e("#wps_wpr_membership_level_value_"+p).val(),n=e("#wps_wpr_membership_category_list_"+p).val();e("#wps_wpr_membership_product_list_"+p).val();var a=e("#wps_wpr_membership_discount_"+p).val();if(r&&i&&n&&a||(r?e("#wps_wpr_membership_level_name_"+p).removeClass("wps_wpr_error_notice"):(s=!0,t+='<div class="notice notice-error is-dismissible"><p><strong>'+wps_wpr_object.LevelName_notice+"</strong></p></div>",e("#wps_wpr_membership_level_name_"+p).addClass("wps_wpr_error_notice")),i?e("#wps_wpr_membership_level_value_"+p).removeClass("wps_wpr_error_notice"):(s=!0,t+='<div class="notice notice-error is-dismissible"><p><strong>'+wps_wpr_object.LevelValue_notice+"</strong></p></div>",e("#wps_wpr_membership_level_value_"+p).addClass("wps_wpr_error_notice")),n?e("#wps_wpr_membership_category_list_"+p).removeClass("wps_wpr_error_notice"):(s=!0,t+='<div class="notice notice-error is-dismissible"><p><strong>'+wps_wpr_object.CategValue_notice+"</strong></p></div>",e("#wps_wpr_membership_category_list_"+p).addClass("wps_wpr_error_notice")),a?e("#wps_wpr_membership_discount_"+p).removeClass("wps_wpr_error_notice"):(s=!0,t+='<div class="notice notice-error is-dismissible"><p><strong>'+wps_wpr_object.Discount_notice+"</strong></p></div>",e("#wps_wpr_membership_discount_"+p).addClass("wps_wpr_error_notice"))),s)e(".notice.notice-error.is-dismissible").each(function(){e(this).remove()}),e(".notice.notice-success.is-dismissible").each(function(){e(this).remove()}),e("html, body").animate({scrollTop:e(".wps_rwpr_header").offset().top},800),e(t).insertAfter(e(".wps_rwpr_header"));else{p=parseInt(p)+1;var o,l,w="",c="",d=wps_wpr_object.Categ_option,l=[];for(var m in d)l=d[m].cat_name,c+='<option value="'+(o=d[m].id)+'">'+l+"</option>";w+='<div id ="wps_wpr_parent_repeatable_'+p+'" data-id="'+p+'" class="wps_wpr_repeat">',w+='<table class="wps_wpr_repeatable_section">',w+='<tr valign="top"><th scope="row" class="titledesc"><label for="wps_wpr_membership_level_name">'+wps_wpr_object.Labeltext+"</label></th>",w+='<td class="forminp forminp-text"><label for="wps_wpr_membership_level_name"><input type="text" name="wps_wpr_membership_level_name_'+p+'" value="" id="wps_wpr_membership_level_name_'+p+'" class="text_points" required>'+wps_wpr_object.Labelname+'</label><input type="button" value='+wps_wpr_object.Remove_text+' class="button-primary woocommerce-save-button wps_wpr_remove_button" id="'+p+'"></td></tr>',w+='<tr valign="top"><th scope="row" class="titledesc"><label for="wps_wpr_membership_level_value">'+wps_wpr_object.Points+'</label></th><td class="forminp forminp-text"><label for="wps_wpr_membership_level_value"><input type="number" min="1" value="" name="wps_wpr_membership_level_value_'+p+'" id="wps_wpr_membership_level_value_'+p+'" class="input-text" required></label></td></tr>',w+='<tr valign="top"><th scope="row" class="titledesc"><label for="wps_wpr_membership_expiration">'+wps_wpr_object.Exp_period+'</label></th><td class="forminp forminp-text"><input type="number" min="1" value="" name="wps_wpr_membership_expiration_'+p+'"id="wps_wpr_membership_expiration_'+p+'" class="input-text"><select id="wps_wpr_membership_expiration_days_'+p+'" name="wps_wpr_membership_expiration_days_'+p+'"><option value="days">'+wps_wpr_object.Days+'</option><option value="weeks">'+wps_wpr_object.Weeks+'</option><option value="months">'+wps_wpr_object.Months+'</option><option value="years">'+wps_wpr_object.Years+"</option>",w+='<tr valign="top"><th scope="row" class="titledesc"><label for="wps_wpr_membership_category_list">'+wps_wpr_object.Categ_text+'</label></th><td class="forminp forminp-text"><select id="wps_wpr_membership_category_list_'+p+'" class="wps_wpr_common_class_categ" data-id="'+p+'" multiple="multiple" name="wps_wpr_membership_category_list_'+p+'[]">'+c+"</select></td></tr>",w+='<tr valign="top"><th scope="row" class="titledesc"><label for="wps_wpr_membership_product_list">'+wps_wpr_object.Prod_text+'</label></th><td class="forminp forminp-text"><select id="wps_wpr_membership_product_list_'+p+'" multiple="multiple" name="wps_wpr_membership_product_list_'+p+'[]"></select></td></tr>',w+='<tr valign="top"><th scope="row" class="titledesc"><label for="wps_wpr_membership_discount">'+wps_wpr_object.Discounttext+'</label></th><td class="forminp forminp-text"><label for="wps_wpr_membership_discount"><input type="number" min="0" max="100" value="0" name="wps_wpr_membership_discount_'+p+'" id="wps_wpr_membership_discount_'+p+'" class="input-text"></label></td></tr>',w+='<tr valign="top"><th scope="row" class="titledesc"><label for="wps_wpr_enable_to_rewards_with_points">'+wps_wpr_object.enble_mem_reward_label+'</label></th><td class="forminp forminp-text"><label for="wps_wpr_enable_to_rewards_with_points"><input type="checkbox" value="1" name="wps_wpr_enable_to_rewards_with_points_'+p+'" id="wps_wpr_enable_to_rewards_with_points_'+p+'" class="input-text"></label></td></tr>',w+='<tr valign="top"><th scope="row" class="titledesc"><label for="wps_wpr_mem_reward_type">'+wps_wpr_object.mem_points_type+'</label></th><td class="forminp forminp-text"><label for="wps_wpr_choose_mem_points_type"><select name="wps_wpr_choose_mem_points_type_'+p+'" id="wps_wpr_choose_mem_points_type_'+p+'" class="wps_wpr_assign_mem_rewards_points"><option value="fixed">Fixed</option><option value="percent">Percent</option></select></label></td><input type="hidden" value="'+p+'" name="hidden_count"></tr>',w+='<tr valign="top"><th scope="row" class="titledesc"><label for="wps_wpr_mem_rewards_points">'+wps_wpr_object.Points+'</label></th><td class="forminp forminp-text"><label for="wps_wpr_assign_mem_points_val"><input type="number" min="0" name="wps_wpr_assign_mem_points_val_'+p+'" id="wps_wpr_assign_mem_points_val_'+p+'" value="0"></label></td><input type="hidden" value="'+p+'" name="hidden_count"></tr>',w+='<tr valign="top"><th scope="row" class="titledesc"><label for="wps_wpr_enable_free_shipping_">'+wps_wpr_object.wps_wpr_free_shipping+'</label></th><td class="forminp forminp-text"><label for="wps_wpr_enable_free_shipping_"><input type="checkbox" value="1" name="wps_wpr_enable_free_shipping_'+p+'" id="wps_wpr_enable_free_shipping_'+p+'" class="input-text"></label></td></tr></table></div>',e(".parent_of_div").append(w),e("#wps_wpr_parent_repeatable_"+p).find("#wps_wpr_membership_category_list_"+p).select2(),e("#wps_wpr_parent_repeatable_"+p).find("#wps_wpr_membership_product_list_"+p).select2()}}else{var u="";e(document).find(".wps_wpr_object_purchase").remove(),u='<div class="wps_wpr_object_purchase"><p>'+wps_wpr_object.pro_text+' <a target="_blanck" href="'+wps_wpr_object.pro_link+'">'+wps_wpr_object.pro_link_text+"</a></p></div>",e(".parent_of_div").append(u)}}),jQuery(document).on("click",".wps_wpr_preview_whatsapp_sample",function(e){jQuery(document).find(".wps_wpr_preview_whatsapp_sample").css("color","#2271b1"),e.preventDefault(),jQuery(".wps_wpr_preview_whatsapp_template_img").show()}),jQuery(document).on("click",".wps_wpr_preview_whatsapp_template_img",function(){jQuery(".wps_wpr_preview_whatsapp_template_img").hide()}),jQuery(document).on("click","#wps_wpr_syncs_points_on_klaviyo_btn",function(){jQuery("#wps_wpr_klaviyo_public_api_key").val().trim()?(jQuery(this).prop("disabled",!0),function e(s,t=""){var p=jQuery("#wps_wpr_klaviyo_public_api_key").val().trim(),r=50;s>r||(r=s);var i={action:"wps_sync_points_on_klaviyo",wps_nonce:wps_wpr_object.wps_wpr_nonce,current_page:t,per_user:r,klaviyo_public_api_key:p};jQuery(".wps_wpr_klaviyo_sync_loader").show(),jQuery(".wps_wpr_klaviyo_sync_notice").show(),jQuery.ajax({method:"POST",url:wps_wpr_object.ajaxurl,data:i,success:function(t){if(parseInt(s)>=parseInt(t.offset)+parseInt(t.per_user)){if(t.offset<=0)var p=r;else p=parseFloat(t.offset)+parseFloat(r);jQuery(".wps_wpr_klaviyo_sync_notice").css("color","green").html(p+" user points has been successfully synced"),e(s,t.current_page)}else jQuery("#wps_wpr_syncs_points_on_klaviyo_btn").prop("disabled",!1),jQuery(".wps_wpr_klaviyo_sync_loader").hide(),jQuery(".wps_wpr_klaviyo_sync_notice").hide(),window.location.reload()},error:function(e){console.log(e)}})}(wps_wpr_object.wps_user_count)):jQuery(".wps_wpr_klaviyo_sync_notice").show().css("color","red").html("please enter your Klaviyo public API key.")}),jQuery(document).on("change",".wps_wpr_enable_quiz_contest_campaign",function(){let e=jQuery(this).is(":checked");1==jQuery(".wps_wpr_quiz_row").length&&(e?jQuery(".wps_wpr_quiz_field").prop("required",!0):jQuery(".wps_wpr_quiz_field").prop("required",!1))}),wps_wpr_object.check_pro_activate&&(jQuery(document).on("click","#wps_wpr_add_quiz",function(){if(!jQuery(".wps_wpr_object_purchase").length){let e=`
					<div class="wps_wpr_object_purchase">
						<p>
							${wps_wpr_object.badge_pro__text.replace("Badges","Quiz")} 
							<a target="_blank" href="${wps_wpr_object.pro_link}">
								${wps_wpr_object.pro_link_text}
							</a>
						</p>
					</div>
				`;jQuery(".wps_wpr_insert_pro_html").show().append(e)}}),jQuery(".wps_wpr_general_actions").hide()),jQuery(document).on("click",".wps_wpr_view_campaign_existing_template",function(s){s.preventDefault(),e(".wps-popup").addClass("popup--active")}),e(document).on("click",".wps-popup_shadow,.wps-popup_m-close",function(s){e(".wps-popup").removeClass("popup--active")}),e(document).on("click",".wps-popup_m-sidebar span",function(){let s=e(this).attr("id");e(".wps-popup_m-content").removeClass("active_tab"),e(`.${s}`).addClass("active_tab"),e(".wps-popup_m-sidebar span").removeClass("active"),e(this).addClass("active"),localStorage.setItem("activeTab",s)});let s=localStorage.getItem("activeTab");s&&(e(`#${s}`).addClass("active"),e(`.${s}`).addClass("active_tab")),e(document).on("click",".wps_wpr_apply_banner_img",function(s){s.preventDefault();let t=e(this),p=t.closest(".wps-popup_mcb-img"),r=p.closest(".wps-popup_m-content");e(".wps-popup_mcb-img").removeClass("button--active"),e(".wps_wpr_apply_banner_img").text("Apply"),p.addClass("button--active");let i=p.find(".wps_wpr_camp_banner_heading").text(),n=p.find(".wps_wpr_cam_banner_image").attr("src"),a=p.find(".wps_wpr_cam_prim_color").text(),o=p.find(".wps_wpr_cam_sec_color").text(),l=r.attr("class").split(/\s+/),w=l.find(e=>e.startsWith("wps_wpr_")),c={section:w,index:p.index()};localStorage.setItem("applied_banner",JSON.stringify(c)),e.ajax({url:wps_wpr_object.ajaxurl,method:"POST",data:{action:"wps_set_camp_heading_and_image",wps_nonce:wps_wpr_object.wps_wpr_nonce,banner_heading:i,banner_image:n,modal_prim_col:a,modal_sec_col:o},success:function(){t.text("Applied"),setTimeout(function(){e(".wps-popup").removeClass("popup--active"),window.location.reload()},800)},error:function(e,s,t){console.error("Error:",t),alert("An error occurred while updating the campaign. Please try again.")}})});let t=localStorage.getItem("applied_banner");if(t){let{section:p,index:r}=JSON.parse(t);e(".wps-popup_mcb-img").removeClass("button--active"),e(".wps_wpr_apply_banner_img").text("Apply"),e(".wps-popup_m-content").removeClass("active_tab"),e(".wps-popup_m-sidebar span").removeClass("active"),e(`.${p}`).addClass("active_tab"),e(`#${p}`).addClass("active");let i=e(`.${p}`).find(".wps-popup_mcb-img").eq(r);i.length&&i.addClass("button--active").find(".wps_wpr_apply_banner_img").text("Applied")}let n=e(".wps_wpr_general_row_wrap"),a=e("#wps_wpr_add_social_share_campaign"),o=document.getElementById("wps_wpr_campaign_template");function l(){e("#wps_wpr_error_message").remove()}a.on("click",function(s){s.preventDefault(),l();let t=n.find("article.wps_wpr_general_row").last(),p;if(t.length&&(p=!0,(r=t).find("input, select").each(function(){let s=e(this);""===e.trim(String(s.val()))?(s.addClass("wps-error-field"),p=!1):s.removeClass("wps-error-field")}),!p)){var r;let i;0===(i=e("#wps_wpr_error_message")).length&&(i=e('<div id="wps_wpr_error_message" class="wps-error-msg" role="alert"></div>').insertBefore(a)),i.text("Please fill all fields before adding a new campaign.");let w=t.find(".wps-error-field").first();w.length&&w.focus();return}let c=function s(){if(!o){let t=n.find("article.wps_wpr_general_row").last(),p=t.clone();return p.find("input").val(""),p.find("select").prop("selectedIndex",0),p}let r=o.content.cloneNode(!0),i=e(r),a=i.find("article.wps_wpr_general_row").first();return a.find("input, select").val("").prop("selectedIndex",0),a}();a.closest("div").before(c),c.find("input, select").first().focus()}),n.on("click",".wps_wpr_remove_campaign",function(s){s.preventDefault();let t=e(this).closest("article.wps_wpr_general_row"),p=n.find("article.wps_wpr_general_row").length;p>1?t.remove():(t.find("input").val(""),t.find("select").prop("selectedIndex",0)),l()}),n.on("input change","input, select",function(){let s=e(this);""!==e.trim(String(s.val()))&&(s.removeClass("wps-error-field"),0===n.find(".wps-error-field").length&&l())})});